<div class="page-header">
    <h1>{{'defaultUsernames' | i18n}}</h1>
</div>
<p>{{'defaultUsernamesDesc' | i18n}}</p>
<form #form (ngSubmit)="submit()" [appApiAction]="formPromise" ngNativeValidate>
    <h2>{{'defaultUsernames' | i18n}}</h2>
    <p *ngIf="loading">
        <i class="fa fa-spinner fa-spin text-muted" title="{{'loading' | i18n}}" aria-hidden="true"></i>
        <span class="sr-only">{{'loading' | i18n}}</span>
    </p>
    <ng-container *ngIf="!loading">
        <div class="form-group d-flex" *ngFor="let d of usernames; let i = index; trackBy: indexTrackBy">
            <div class="flex-fill">
                <label for="defaultUsername_{{i}}" class="sr-only">{{'defaultUsernameX' | i18n : (i + 1)}}</label>
                <input type="text" class="form-control" name="DefaultUsername[{{i}}]" id="defaultUsername_{{i}}"
                    [(ngModel)]="usernames[i]" placeholder="{{'ex' | i18n}} your@email.com" required />
            </div>
            <button type="button" class="btn btn-link text-danger ml-2" (click)="remove(i)"
                appA11yTitle="{{'remove' | i18n}}">
                <i class="fa fa-minus-circle fa-lg" aria-hidden="true"></i>
            </button>
        </div>
        <button type="button" (click)="add()" class="btn btn-outline-secondary btn-sm mb-2">
            <i class="fa fa-plus fa-fw" aria-hidden="true"></i> {{'newDefaultUsername' | i18n}}
        </button>
    </ng-container>
    <br/>
    <button type="submit" class="btn btn-primary btn-submit" [disabled]="form.loading">
        <i class="fa fa-spinner fa-spin" title="{{'loading' | i18n}}" aria-hidden="true"></i>
        <span>{{'save' | i18n}}</span>
    </button>
</form>
